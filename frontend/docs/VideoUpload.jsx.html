<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: VideoUpload.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: VideoUpload.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import Navbar from "./Navbar";
import { useEffect, useState, useRef, useContext} from "react";
import axios from "axios";
import SingleVideoUpload from "./SingleVideoUpload";
import { VideoContext } from "./VideoUtil";
import VideoRow from "./VideoRow";
/**
 * 
 * @returns VideoUpload component
 * @description This component is used to upload videos to the server
 * 
 */


function VideoUpload() {
    const { videos, setVideos } = useContext(VideoContext);
    const [cachedVideos, setCachedVideos] = useState([]);
    const inputRef = useRef(null);

    // useEffect(() => {
    //   axios
    //       .get("http://localhost:8080/videos")
    //       .then((response) => {
    //           setCachedVideos(response.data);
    //       })
    //       .catch(function (error) {
    //           // handle error
    //           console.log(error);
    //           });
    //       }, []);



    /**
     * @typedef {Object} ChangeEvent
     * @param {ChangeEvent} e
     * @returns {void}
     * @description This function is used to handle the file upload 
     */
    function handleFile(e) {
        e.preventDefault();
        if (videos.length > 0 &amp;&amp; videos.length &lt; 4) {
            setVideos([...videos, { file: e.target.files[0], uploaded: false, analysed: false, name: e.target.files[0].name }]);
        } else if (videos.length === 0) {
            setVideos([{ file: e.target.files[0], uploaded: false, analysed: false, name: e.target.files[0].name }]);
        } else {
            alert("You can only upload 4 videos at a time");
        }
        console.log(videos);
        console.log(videos.length);
    }
    const handleUploadClick = (e) => {
        e.preventDefault();
        inputRef.current?.click();
      };
       
    
    return (
       &lt;> 
        &lt;Navbar />
        
                &lt;form autoComplete="off" >
                &lt;div>
                        &lt;button className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full m-2" onClick={(e) => handleUploadClick(e)}>Choose video&lt;/button>
                        &lt;input className="ui"
                            type="file"
                            name="video"
                            accept="video/mp4, video/mov"
                            placeholder="Video to analyse"
                            value={""}
                            onChange={handleFile}
                            ref={inputRef}
                            hidden
                            />
                        &lt;/div>
                        &lt;div className="grid grid-cols-1 gap-4 m-5">
                        {videos.length > 0? [...videos].map((video, index) => (&lt;SingleVideoUpload key={index} 
// @ts-ignore
                        video={video} />))
                        : null}
                        &lt;/div>
                       { videos.length > 0 ? &lt;hr className="my-12 h-0.5 border-t-0 bg-neutral-100 opacity-100 dark:opacity-50" /> : null }
                &lt;div className="grid grid-flow-row auto-rows-max">
                    {[...cachedVideos].map((video, index) => (
                      &lt;VideoRow key={index} video={video} 
                      />))}
                &lt;/div>
                &lt;/form>
         
   
    &lt;/>

    );
}
export default VideoUpload;


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#SingleVideoUpload">SingleVideoUpload</a></li><li><a href="global.html#VideoUpload">VideoUpload</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 21 2024 10:10:24 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
